<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case Opening Game</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        .cases-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .cases-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .cases-header h1 {
            font-size: 42px;
            color: #6e6e6e;
            margin-bottom: 10px;
        }

        .cases-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }

        .case-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }

        .case-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .case-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
        }

        .case-icon {
            font-size: 80px;
            text-align: center;
            margin-bottom: 15px;
        }

        .case-name {
            font-size: 22px;
            font-weight: bold;
            color: var(--text-primary);
            text-align: center;
            margin-bottom: 10px;
        }

        .case-price {
            font-size: 28px;
            font-weight: bold;
            color: #fbbf24;
            text-align: center;
        }

        .opening-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 1000;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .opening-overlay.active {
            display: flex;
        }

        .spinner-container {
            position: relative;
            width: 90%;
            max-width: 1200px;
            height: 50px;
            overflow: hidden;
            margin-bottom: 0px;
        }

        .spinner-window {
            position: absolute;
            left: 50%;
            top: 0;
            height: 100%;
            background: #fbbf24;
            box-shadow: 0 0 20px #fbbf24;
            transform: translateX(-1px);
            z-index: 10;
        }

        .spinner-items {
            display: flex;
            position: absolute;
            left: 0;
            transition: left 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
        }

        .spinner-item {
            min-width: 150px;
            height: 180px;
            margin: 10px;
            background: #1f2937;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 15px;
            border: 2px solid;
        }

        .spinner-item.blue { border-color: #3b82f6; }
        .spinner-item.purple { border-color: #8b5cf6; }
        .spinner-item.pink { border-color: #ec4899; }
        .spinner-item.red { border-color: #ef4444; }
        .spinner-item.gold { border-color: #fbbf24; }

        .spinner-item-icon {
            font-size: 60px;
            margin-bottom: 10px;
        }

        .spinner-item-name {
            font-size: 12px;
            color: white;
            text-align: center;
            margin-bottom: 5px;
        }

        .spinner-item-value {
            font-size: 14px;
            font-weight: bold;
            color: #fbbf24;
        }

        .result-display {
            text-align: center;
            color: white;
        }

        .result-item {
            background: #1f2937;
            border-radius: 15px;
            padding: 30px;
            margin: 20px auto;
            max-width: 400px;
            border: 3px solid;
        }

        .result-item-icon {
            font-size: 100px;
            margin-bottom: 15px;
        }

        .result-item-name {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .result-item-value {
            font-size: 32px;
            color: #fbbf24;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .result-profit {
            font-size: 20px;
            margin-top: 10px;
        }

        .result-profit.profit { color: #22c55e; }
        .result-profit.loss { color: #ef4444; }

        .close-btn {
            background: #667eea;
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
        }

        .close-btn:hover {
            background: #5568d3;
        }

        .case-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 999;
            display: none;
            overflow-y: auto;
            padding: 40px 20px;
        }

        .case-modal.active {
            display: block;
        }

        .case-modal-content {
            background: var(--card-bg);
            border-radius: 20px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .modal-close {
            font-size: 32px;
            cursor: pointer;
            color: #666;
        }

        .items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .item-card {
            background: #f9fafb;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid;
        }

        .item-card.blue { border-color: #3b82f6; background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); }
        .item-card.purple { border-color: #8b5cf6; background: linear-gradient(135deg, #faf5ff 0%, #ede9fe 100%); }
        .item-card.pink { border-color: #ec4899; background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%); }
        .item-card.red { border-color: #ef4444; background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%); }
        .item-card.gold { border-color: #fbbf24; background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%); }

        .item-icon {
            font-size: 50px;
            margin-bottom: 10px;
        }

        .item-name {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }

        .item-value {
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
        }

        .item-chance {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .open-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .open-btn {
            padding: 15px 40px;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            background: #4ade80;
            color: white;
        }

        .open-btn:hover {
            background: #22c55e;
            transform: translateY(-2px);
        }

        .open-btn.multiple {
            background: #667eea;
        }

        .open-btn.multiple:hover {
            background: #5568d3;
        }

        @media (max-width: 768px) {
            .cases-grid {
                grid-template-columns: 1fr;
            }

            .spinner-container {
                width: 100%;
            }

            .spinner-item {
                min-width: 120px;
                height: 150px;
            }
        }
    </style>
</head>
<body>
    <div class="cases-container">
        <div class="cases-grid" id="casesGrid"></div>
    </div>

    <div class="case-modal" id="caseModal">
        <div class="case-modal-content">
            <div class="modal-header">
                <h2 id="modalCaseName">Case Name</h2>
                <span class="modal-close" onclick="CasesGame.closeModal()">Ã—</span>
            </div>
            <div class="items-grid" id="itemsGrid"></div>
            <div class="open-controls">
                <button class="open-btn" onclick="CasesGame.openCase(1)">Open 1 Case</button>
                <button class="open-btn multiple" onclick="CasesGame.openCase(3)">Open 3 Cases</button>
                <button class="open-btn multiple" onclick="CasesGame.openCase(5)">Open 5 Cases</button>
            </div>
        </div>
    </div>

    <div class="opening-overlay" id="openingOverlay">
        <div class="spinner-container">
            <div class="spinner-window"></div>
            <div class="spinner-items" id="spinnerItems"></div>
        </div>
        <div class="result-display" id="resultDisplay"></div>
    </div>

    <script>
        const CasesGame = {
            selectedCase: null,
            isAnimating: false,
            
            cases: [
                {
                    id: 1,
                    name: "Beginner Case",
                    icon: "ðŸ“¦",
                    price: 100,
                    items: [
                        { name: "Basic Knife", icon: "ðŸ”ª", value: 50, rarity: "blue", chance: 60 },
                        { name: "Common Pistol", icon: "ðŸ”«", value: 75, rarity: "blue", chance: 60 },
                        { name: "Standard Rifle", icon: "âš”ï¸", value: 100, rarity: "purple", chance: 25 },
                        { name: "Classic Gloves", icon: "ðŸ¥Š", value: 150, rarity: "purple", chance: 25 },
                        { name: "Rare Skin", icon: "ðŸ’Ž", value: 250, rarity: "pink", chance: 10 },
                        { name: "Premium Blade", icon: "ðŸ—¡ï¸", value: 400, rarity: "red", chance: 4 },
                        { name: "Legendary Knife", icon: "âšœï¸", value: 800, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 2,
                    name: "Weapon Case",
                    icon: "ðŸŽ¯",
                    price: 500,
                    items: [
                        { name: "Scout Rifle", icon: "ðŸŽ¯", value: 200, rarity: "blue", chance: 60 },
                        { name: "Assault Rifle", icon: "ðŸ”«", value: 400, rarity: "blue", chance: 60 },
                        { name: "Tactical SMG", icon: "âš”ï¸", value: 600, rarity: "purple", chance: 25 },
                        { name: "Sniper Elite", icon: "ðŸŽ¯", value: 900, rarity: "purple", chance: 25 },
                        { name: "Gold AK", icon: "ðŸ’›", value: 1500, rarity: "pink", chance: 10 },
                        { name: "Dragon AWP", icon: "ðŸ‰", value: 2500, rarity: "red", chance: 4 },
                        { name: "Fire Serpent", icon: "ðŸ”¥", value: 5000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 3,
                    name: "Knife Collection",
                    icon: "ðŸ—¡ï¸",
                    price: 1000,
                    items: [
                        { name: "Gut Knife", icon: "ðŸ”ª", value: 500, rarity: "blue", chance: 60 },
                        { name: "Flip Knife", icon: "ðŸ—¡ï¸", value: 800, rarity: "blue", chance: 60 },
                        { name: "Bayonet", icon: "âš”ï¸", value: 1200, rarity: "purple", chance: 25 },
                        { name: "Huntsman", icon: "ðŸ—¡ï¸", value: 1800, rarity: "purple", chance: 25 },
                        { name: "Butterfly Knife", icon: "ðŸ¦‹", value: 3000, rarity: "pink", chance: 10 },
                        { name: "Karambit", icon: "ðŸŒ™", value: 5000, rarity: "red", chance: 4 },
                        { name: "M9 Bayonet", icon: "âšœï¸", value: 10000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 4,
                    name: "Elite Case",
                    icon: "ðŸ’Ž",
                    price: 2500,
                    items: [
                        { name: "StatTrak Pistol", icon: "ðŸ”«", value: 1000, rarity: "blue", chance: 60 },
                        { name: "StatTrak Rifle", icon: "âš”ï¸", value: 1800, rarity: "blue", chance: 60 },
                        { name: "Factory New AK", icon: "âœ¨", value: 3000, rarity: "purple", chance: 25 },
                        { name: "Howl M4A4", icon: "ðŸº", value: 5000, rarity: "purple", chance: 25 },
                        { name: "Dlore AWP", icon: "ðŸ¦…", value: 8000, rarity: "pink", chance: 10 },
                        { name: "Crimson Web", icon: "ðŸ•·ï¸", value: 15000, rarity: "red", chance: 4 },
                        { name: "Sapphire Doppler", icon: "ðŸ’ ", value: 30000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 5,
                    name: "Glove Case",
                    icon: "ðŸ¥Š",
                    price: 3000,
                    items: [
                        { name: "Sport Gloves", icon: "ðŸ¥Š", value: 1500, rarity: "blue", chance: 60 },
                        { name: "Driver Gloves", icon: "ðŸŽï¸", value: 2000, rarity: "blue", chance: 60 },
                        { name: "Hand Wraps", icon: "ðŸ¤œ", value: 3500, rarity: "purple", chance: 25 },
                        { name: "Moto Gloves", icon: "ðŸï¸", value: 5000, rarity: "purple", chance: 25 },
                        { name: "Specialist Gloves", icon: "ðŸ‘Š", value: 8000, rarity: "pink", chance: 10 },
                        { name: "Pandora's Box", icon: "ðŸ“¦", value: 15000, rarity: "red", chance: 4 },
                        { name: "Emerald Web", icon: "ðŸ•¸ï¸", value: 35000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 6,
                    name: "Premium Case",
                    icon: "ðŸ‘‘",
                    price: 5000,
                    items: [
                        { name: "Minimal Wear Knife", icon: "ðŸ—¡ï¸", value: 2500, rarity: "blue", chance: 60 },
                        { name: "Factory New Glock", icon: "ðŸ”«", value: 3500, rarity: "blue", chance: 60 },
                        { name: "Fade Knife", icon: "ðŸŒˆ", value: 6000, rarity: "purple", chance: 25 },
                        { name: "Tiger Tooth", icon: "ðŸ…", value: 9000, rarity: "purple", chance: 25 },
                        { name: "Marble Fade", icon: "ðŸŽ¨", value: 15000, rarity: "pink", chance: 10 },
                        { name: "Ruby Doppler", icon: "ðŸ’Ž", value: 30000, rarity: "red", chance: 4 },
                        { name: "Blue Gem", icon: "ðŸ’ ", value: 60000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 7,
                    name: "Legendary Case",
                    icon: "â­",
                    price: 10000,
                    items: [
                        { name: "Rare Pattern", icon: "ðŸŽ¨", value: 5000, rarity: "blue", chance: 60 },
                        { name: "Limited Edition", icon: "ðŸ†", value: 8000, rarity: "blue", chance: 60 },
                        { name: "Collectors Item", icon: "ðŸ’Ž", value: 12000, rarity: "purple", chance: 25 },
                        { name: "Signed Skin", icon: "âœï¸", value: 18000, rarity: "purple", chance: 25 },
                        { name: "Championship", icon: "ðŸ…", value: 30000, rarity: "pink", chance: 10 },
                        { name: "Tournament Drop", icon: "ðŸŽª", value: 60000, rarity: "red", chance: 4 },
                        { name: "One of a Kind", icon: "ðŸ‘‘", value: 120000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 8,
                    name: "Souvenir Case",
                    icon: "ðŸŽ",
                    price: 15000,
                    items: [
                        { name: "Souvenir Pistol", icon: "ðŸ”«", value: 7500, rarity: "blue", chance: 60 },
                        { name: "Souvenir Rifle", icon: "âš”ï¸", value: 12000, rarity: "blue", chance: 60 },
                        { name: "Major Skin", icon: "ðŸ†", value: 18000, rarity: "purple", chance: 25 },
                        { name: "Finals Drop", icon: "ðŸŽŠ", value: 28000, rarity: "purple", chance: 25 },
                        { name: "Gold Sticker", icon: "â­", value: 45000, rarity: "pink", chance: 10 },
                        { name: "Championship 2024", icon: "ðŸ…", value: 90000, rarity: "red", chance: 4 },
                        { name: "Grand Final MVP", icon: "ðŸ‘‘", value: 180000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 9,
                    name: "Exclusive Case",
                    icon: "ðŸ’°",
                    price: 25000,
                    items: [
                        { name: "Exclusive Blade", icon: "ðŸ—¡ï¸", value: 12500, rarity: "blue", chance: 60 },
                        { name: "VIP Weapon", icon: "ðŸ”«", value: 20000, rarity: "blue", chance: 60 },
                        { name: "Platinum Skin", icon: "ðŸ’¿", value: 30000, rarity: "purple", chance: 25 },
                        { name: "Diamond Edition", icon: "ðŸ’Ž", value: 50000, rarity: "purple", chance: 25 },
                        { name: "Royal Collection", icon: "ðŸ‘‘", value: 80000, rarity: "pink", chance: 10 },
                        { name: "Imperial Set", icon: "âšœï¸", value: 150000, rarity: "red", chance: 4 },
                        { name: "Crown Jewel", icon: "ðŸ’", value: 300000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 10,
                    name: "Ultimate Case",
                    icon: "ðŸ”±",
                    price: 50000,
                    items: [
                        { name: "Mythical Blade", icon: "âš”ï¸", value: 25000, rarity: "blue", chance: 60 },
                        { name: "Ancient Weapon", icon: "ðŸº", value: 40000, rarity: "blue", chance: 60 },
                        { name: "Legendary Artifact", icon: "ðŸ—¿", value: 60000, rarity: "purple", chance: 25 },
                        { name: "Divine Relic", icon: "âœ¨", value: 100000, rarity: "purple", chance: 25 },
                        { name: "Celestial Item", icon: "ðŸŒŸ", value: 160000, rarity: "pink", chance: 10 },
                        { name: "God Tier", icon: "âš¡", value: 300000, rarity: "red", chance: 4 },
                        { name: "Infinity Edge", icon: "â™¾ï¸", value: 600000, rarity: "gold", chance: 1 }
                    ]
                },
                // NEW CASES START HERE (11-30)
                {
                    id: 11,
                    name: "Titan Case",
                    icon: "âš¡",
                    price: 75000,
                    items: [
                        { name: "Titan Blade", icon: "âš”ï¸", value: 37500, rarity: "blue", chance: 60 },
                        { name: "Thunder Gun", icon: "ðŸŒ©ï¸", value: 60000, rarity: "blue", chance: 60 },
                        { name: "Storm Rifle", icon: "ðŸŒªï¸", value: 90000, rarity: "purple", chance: 25 },
                        { name: "Lightning Strike", icon: "âš¡", value: 150000, rarity: "purple", chance: 25 },
                        { name: "Zeus Weapon", icon: "ðŸ‘‘", value: 240000, rarity: "pink", chance: 10 },
                        { name: "Olympian", icon: "ðŸ›ï¸", value: 450000, rarity: "red", chance: 4 },
                        { name: "Divine Thunder", icon: "ðŸŒŸ", value: 900000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 12,
                    name: "Dragon Case",
                    icon: "ðŸ‰",
                    price: 100000,
                    items: [
                        { name: "Dragon Fang", icon: "ðŸ¦·", value: 50000, rarity: "blue", chance: 60 },
                        { name: "Wyrm Blade", icon: "ðŸ—¡ï¸", value: 80000, rarity: "blue", chance: 60 },
                        { name: "Dragon Scale", icon: "ðŸ›¡ï¸", value: 120000, rarity: "purple", chance: 25 },
                        { name: "Fire Breath", icon: "ðŸ”¥", value: 200000, rarity: "purple", chance: 25 },
                        { name: "Dragon Heart", icon: "â¤ï¸", value: 320000, rarity: "pink", chance: 10 },
                        { name: "Ancient Dragon", icon: "ðŸ²", value: 600000, rarity: "red", chance: 4 },
                        { name: "Dragon King", icon: "ðŸ‘‘", value: 1200000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 13,
                    name: "Phoenix Case",
                    icon: "ðŸ”¥",
                    price: 150000,
                    items: [
                        { name: "Phoenix Feather", icon: "ðŸª¶", value: 75000, rarity: "blue", chance: 60 },
                        { name: "Rebirth Blade", icon: "âš”ï¸", value: 120000, rarity: "blue", chance: 60 },
                        { name: "Flame Wings", icon: "ðŸ¦…", value: 180000, rarity: "purple", chance: 25 },
                        { name: "Eternal Fire", icon: "ðŸ”¥", value: 300000, rarity: "purple", chance: 25 },
                        { name: "Phoenix Soul", icon: "ðŸ’«", value: 480000, rarity: "pink", chance: 10 },
                        { name: "Immortal Phoenix", icon: "ðŸ”±", value: 900000, rarity: "red", chance: 4 },
                        { name: "Phoenix Reborn", icon: "âœ¨", value: 1800000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 14,
                    name: "Galaxy Case",
                    icon: "ðŸŒŒ",
                    price: 200000,
                    items: [
                        { name: "Star Dust", icon: "âœ¨", value: 100000, rarity: "blue", chance: 60 },
                        { name: "Nebula Gun", icon: "ðŸŒ ", value: 160000, rarity: "blue", chance: 60 },
                        { name: "Cosmic Blade", icon: "ðŸŒŸ", value: 240000, rarity: "purple", chance: 25 },
                        { name: "Supernova", icon: "ðŸ’¥", value: 400000, rarity: "purple", chance: 25 },
                        { name: "Black Hole", icon: "âš«", value: 640000, rarity: "pink", chance: 10 },
                        { name: "Galaxy Core", icon: "ðŸŒŒ", value: 1200000, rarity: "red", chance: 4 },
                        { name: "Universe", icon: "ðŸŒ", value: 2400000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 15,
                    name: "Celestial Case",
                    icon: "ðŸŒŸ",
                    price: 250000,
                    items: [
                        { name: "Angel Wings", icon: "ðŸª½", value: 125000, rarity: "blue", chance: 60 },
                        { name: "Holy Blade", icon: "âš”ï¸", value: 200000, rarity: "blue", chance: 60 },
                        { name: "Divine Light", icon: "âœ¨", value: 300000, rarity: "purple", chance: 25 },
                        { name: "Heavenly Strike", icon: "âš¡", value: 500000, rarity: "purple", chance: 25 },
                        { name: "Seraphim", icon: "ðŸ‘¼", value: 800000, rarity: "pink", chance: 10 },
                        { name: "Archangel", icon: "ðŸ›¡ï¸", value: 1500000, rarity: "red", chance: 4 },
                        { name: "Heaven's Gate", icon: "ðŸ°", value: 3000000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 16,
                    name: "Demon Case",
                    icon: "ðŸ˜ˆ",
                    price: 300000,
                    items: [
                        { name: "Demon Fang", icon: "ðŸ¦·", value: 150000, rarity: "blue", chance: 60 },
                        { name: "Hell Fire", icon: "ðŸ”¥", value: 240000, rarity: "blue", chance: 60 },
                        { name: "Dark Soul", icon: "ðŸ’€", value: 360000, rarity: "purple", chance: 25 },
                        { name: "Infernal Blade", icon: "ðŸ—¡ï¸", value: 600000, rarity: "purple", chance: 25 },
                        { name: "Demon Lord", icon: "ðŸ‘¹", value: 960000, rarity: "pink", chance: 10 },
                        { name: "Lucifer's Pride", icon: "ðŸ˜ˆ", value: 1800000, rarity: "red", chance: 4 },
                        { name: "Hell King", icon: "ðŸ‘‘", value: 3600000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 17,
                    name: "Quantum Case",
                    icon: "âš›ï¸",
                    price: 400000,
                    items: [
                        { name: "Quantum Blade", icon: "âš”ï¸", value: 200000, rarity: "blue", chance: 60 },
                        { name: "Particle Gun", icon: "ðŸ”«", value: 320000, rarity: "blue", chance: 60 },
                        { name: "Atom Splitter", icon: "âš›ï¸", value: 480000, rarity: "purple", chance: 25 },
                        { name: "Fusion Core", icon: "ðŸ’ ", value: 800000, rarity: "purple", chance: 25 },
                        { name: "Singularity", icon: "âš«", value: 1280000, rarity: "pink", chance: 10 },
                        { name: "Quantum Leap", icon: "ðŸŒ€", value: 2400000, rarity: "red", chance: 4 },
                        { name: "Reality Bender", icon: "ðŸŒŒ", value: 4800000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 18,
                    name: "Omega Case",
                    icon: "Î©",
                    price: 500000,
                    items: [
                        { name: "Omega Blade", icon: "âš”ï¸", value: 250000, rarity: "blue", chance: 60 },
                        { name: "Final Strike", icon: "âš¡", value: 400000, rarity: "blue", chance: 60 },
                        { name: "End Game", icon: "ðŸŽ¯", value: 600000, rarity: "purple", chance: 25 },
                        { name: "Terminus", icon: "ðŸ”š", value: 1000000, rarity: "purple", chance: 25 },
                        { name: "Omega Point", icon: "ðŸŽ¯", value: 1600000, rarity: "pink", chance: 10 },
                        { name: "Final Destiny", icon: "âœ¨", value: 3000000, rarity: "red", chance: 4 },
                        { name: "Ultimate End", icon: "ðŸ‘‘", value: 6000000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 19,
                    name: "Eternal Case",
                    icon: "â™¾ï¸",
                    price: 650000,
                    items: [
                        { name: "Eternal Flame", icon: "ðŸ”¥", value: 325000, rarity: "blue", chance: 60 },
                        { name: "Infinity Blade", icon: "âš”ï¸", value: 520000, rarity: "blue", chance: 60 },
                        { name: "Forever Gun", icon: "ðŸ”«", value: 780000, rarity: "purple", chance: 25 },
                        { name: "Timeless", icon: "â°", value: 1300000, rarity: "purple", chance: 25 },
                        { name: "Everlasting", icon: "â™¾ï¸", value: 2080000, rarity: "pink", chance: 10 },
                        { name: "Eternal Life", icon: "ðŸ’«", value: 3900000, rarity: "red", chance: 4 },
                        { name: "Infinity Stone", icon: "ðŸ’Ž", value: 7800000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 20,
                    name: "Ascension Case",
                    icon: "ðŸš€",
                    price: 800000,
                    items: [
                        { name: "Ascended Blade", icon: "âš”ï¸", value: 400000, rarity: "blue", chance: 60 },
                        { name: "Transcendent", icon: "âœ¨", value: 640000, rarity: "blue", chance: 60 },
                        { name: "Beyond Mortal", icon: "ðŸ‘ï¸", value: 960000, rarity: "purple", chance: 25 },
                        { name: "God Mode", icon: "âš¡", value: 1600000, rarity: "purple", chance: 25 },
                        { name: "Enlightened", icon: "ðŸŒŸ", value: 2560000, rarity: "pink", chance: 10 },
                        { name: "Nirvana", icon: "â˜®ï¸", value: 4800000, rarity: "red", chance: 4 },
                        { name: "Supreme Being", icon: "ðŸ‘‘", value: 9600000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 21,
                    name: "Cosmic Emperor",
                    icon: "ðŸŒ ",
                    price: 1000000,
                    items: [
                        { name: "Emperor's Blade", icon: "âš”ï¸", value: 500000, rarity: "blue", chance: 60 },
                        { name: "Cosmic Crown", icon: "ðŸ‘‘", value: 800000, rarity: "blue", chance: 60 },
                        { name: "Galaxy Ruler", icon: "ðŸŒŒ", value: 1200000, rarity: "purple", chance: 25 },
                        { name: "Star Emperor", icon: "â­", value: 2000000, rarity: "purple", chance: 25 },
                        { name: "Universe King", icon: "ðŸŒ", value: 3200000, rarity: "pink", chance: 10 },
                        { name: "Cosmic Throne", icon: "ðŸ°", value: 6000000, rarity: "red", chance: 4 },
                        { name: "Infinite Emperor", icon: "â™¾ï¸", value: 12000000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 22,
                    name: "Primordial Case",
                    icon: "ðŸŒ‹",
                    price: 1250000,
                    items: [
                        { name: "Ancient Power", icon: "âš¡", value: 625000, rarity: "blue", chance: 60 },
                        { name: "Primal Force", icon: "ðŸ’ª", value: 1000000, rarity: "blue", chance: 60 },
                        { name: "Origin Blade", icon: "âš”ï¸", value: 1500000, rarity: "purple", chance: 25 },
                        { name: "First Flame", icon: "ðŸ”¥", value: 2500000, rarity: "purple", chance: 25 },
                        { name: "Genesis Weapon", icon: "ðŸŒŸ", value: 4000000, rarity: "pink", chance: 10 },
                        { name: "Creation Force", icon: "ðŸ’«", value: 7500000, rarity: "red", chance: 4 },
                        { name: "Primordial Chaos", icon: "ðŸŒ€", value: 15000000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 23,
                    name: "Void Master",
                    icon: "ðŸ•³ï¸",
                    price: 1500000,
                    items: [
                        { name: "Void Blade", icon: "âš”ï¸", value: 750000, rarity: "blue", chance: 60 },
                        { name: "Shadow Gun", icon: "ðŸ”«", value: 1200000, rarity: "blue", chance: 60 },
                        { name: "Darkness Edge", icon: "ðŸŒ‘", value: 1800000, rarity: "purple", chance: 25 },
                        { name: "Abyss Walker", icon: "ðŸ‘¤", value: 3000000, rarity: "purple", chance: 25 },
                        { name: "Void King", icon: "ðŸ‘‘", value: 4800000, rarity: "pink", chance: 10 },
                        { name: "Null Existence", icon: "âš«", value: 9000000, rarity: "red", chance: 4 },
                        { name: "Void Emperor", icon: "ðŸ•³ï¸", value: 18000000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 24,
                    name: "Nexus Prime",
                    icon: "ðŸ”®",
                    price: 1750000,
                    items: [
                        { name: "Nexus Shard", icon: "ðŸ’Ž", value: 875000, rarity: "blue", chance: 60 },
                        { name: "Prime Weapon", icon: "âš”ï¸", value: 1400000, rarity: "blue", chance: 60 },
                        { name: "Core Crystal", icon: "ðŸ’ ", value: 2100000, rarity: "purple", chance: 25 },
                        { name: "Prime Force", icon: "âš¡", value: 3500000, rarity: "purple", chance: 25 },
                        { name: "Nexus Power", icon: "ðŸŒŸ", value: 5600000, rarity: "pink", chance: 10 },
                        { name: "Prime Infinity", icon: "â™¾ï¸", value: 10500000, rarity: "red", chance: 4 },
                        { name: "Nexus Omega", icon: "Î©", value: 21000000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 25,
                    name: "Apex Predator",
                    icon: "ðŸ¦…",
                    price: 2000000,
                    items: [
                        { name: "Hunter's Edge", icon: "ðŸ—¡ï¸", value: 1000000, rarity: "blue", chance: 60 },
                        { name: "Predator Blade", icon: "âš”ï¸", value: 1600000, rarity: "blue", chance: 60 },
                        { name: "Apex Strike", icon: "âš¡", value: 2400000, rarity: "purple", chance: 25 },
                        { name: "Beast Master", icon: "ðŸ¦", value: 4000000, rarity: "purple", chance: 25 },
                        { name: "Alpha Weapon", icon: "ðŸ‘‘", value: 6400000, rarity: "pink", chance: 10 },
                        { name: "Supreme Hunter", icon: "ðŸ¦…", value: 12000000, rarity: "red", chance: 4 },
                        { name: "Apex King", icon: "ðŸ”±", value: 24000000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 26,
                    name: "Dimensional Rift",
                    icon: "ðŸŒ€",
                    price: 2500000,
                    items: [
                        { name: "Rift Blade", icon: "âš”ï¸", value: 1250000, rarity: "blue", chance: 60 },
                        { name: "Portal Gun", icon: "ðŸ”«", value: 2000000, rarity: "blue", chance: 60 },
                        { name: "Dimension Cutter", icon: "âœ‚ï¸", value: 3000000, rarity: "purple", chance: 25 },
                        { name: "Reality Tear", icon: "ðŸ’«", value: 5000000, rarity: "purple", chance: 25 },
                        { name: "Void Ripper", icon: "ðŸ•³ï¸", value: 8000000, rarity: "pink", chance: 10 },
                        { name: "Dimensional Lord", icon: "ðŸŒŒ", value: 15000000, rarity: "red", chance: 4 },
                        { name: "Multiverse Key", icon: "ðŸ”‘", value: 30000000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 27,
                    name: "Chrono Master",
                    icon: "â°",
                    price: 3000000,
                    items: [
                        { name: "Time Blade", icon: "âš”ï¸", value: 1500000, rarity: "blue", chance: 60 },
                        { name: "Chrono Weapon", icon: "â±ï¸", value: 2400000, rarity: "blue", chance: 60 },
                        { name: "Temporal Edge", icon: "ðŸ•", value: 3600000, rarity: "purple", chance: 25 },
                        { name: "Time Warp", icon: "ðŸŒ€", value: 6000000, rarity: "purple", chance: 25 },
                        { name: "Eternity Gun", icon: "â™¾ï¸", value: 9600000, rarity: "pink", chance: 10 },
                        { name: "Chrono Lord", icon: "â°", value: 18000000, rarity: "red", chance: 4 },
                        { name: "Time Master", icon: "ðŸ‘‘", value: 36000000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 28,
                    name: "Divine Arsenal",
                    icon: "âšœï¸",
                    price: 3500000,
                    items: [
                        { name: "Holy Armament", icon: "âš”ï¸", value: 1750000, rarity: "blue", chance: 60 },
                        { name: "Divine Weapon", icon: "ðŸ—¡ï¸", value: 2800000, rarity: "blue", chance: 60 },
                        { name: "Sacred Blade", icon: "âœ¨", value: 4200000, rarity: "purple", chance: 25 },
                        { name: "God's Wrath", icon: "âš¡", value: 7000000, rarity: "purple", chance: 25 },
                        { name: "Celestial Edge", icon: "ðŸŒŸ", value: 11200000, rarity: "pink", chance: 10 },
                        { name: "Divine Arsenal", icon: "âšœï¸", value: 21000000, rarity: "red", chance: 4 },
                        { name: "God Slayer", icon: "ðŸ‘‘", value: 42000000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 29,
                    name: "Absolute Zero",
                    icon: "â„ï¸",
                    price: 4000000,
                    items: [
                        { name: "Frozen Blade", icon: "ðŸ—¡ï¸", value: 2000000, rarity: "blue", chance: 60 },
                        { name: "Ice Breaker", icon: "âš”ï¸", value: 3200000, rarity: "blue", chance: 60 },
                        { name: "Frost King", icon: "ðŸ‘‘", value: 4800000, rarity: "purple", chance: 25 },
                        { name: "Glacial Force", icon: "â„ï¸", value: 8000000, rarity: "purple", chance: 25 },
                        { name: "Eternal Winter", icon: "ðŸŒ¨ï¸", value: 12800000, rarity: "pink", chance: 10 },
                        { name: "Absolute Zero", icon: "âš«", value: 24000000, rarity: "red", chance: 4 },
                        { name: "Ice Emperor", icon: "ðŸ”±", value: 48000000, rarity: "gold", chance: 1 }
                    ]
                },
                {
                    id: 30,
                    name: "Omega Supreme",
                    icon: "ðŸŒŒ",
                    price: 5000000,
                    items: [
                        { name: "Supreme Blade", icon: "âš”ï¸", value: 2500000, rarity: "blue", chance: 60 },
                        { name: "Ultimate Force", icon: "ðŸ’ª", value: 4000000, rarity: "blue", chance: 60 },
                        { name: "Omega Strike", icon: "âš¡", value: 6000000, rarity: "purple", chance: 25 },
                        { name: "Absolute Power", icon: "ðŸ’Ž", value: 10000000, rarity: "purple", chance: 25 },
                        { name: "Supreme Ruler", icon: "ðŸ‘‘", value: 16000000, rarity: "pink", chance: 10 },
                        { name: "Omega God", icon: "ðŸ”±", value: 30000000, rarity: "red", chance: 4 },
                        { name: "Infinite Supreme", icon: "â™¾ï¸", value: 60000000, rarity: "gold", chance: 1 }
                    ]
                }
            ],

            init() {
                this.renderCases();
            },

            renderCases() {
                const grid = document.getElementById('casesGrid');
                grid.innerHTML = this.cases.map(c => `
                    <div class="case-card" onclick="CasesGame.showCaseDetails(${c.id})">
                        <div class="case-icon">${c.icon}</div>
                        <div class="case-name">${c.name}</div>
                        <div class="case-price">${c.price.toLocaleString()}</div>
                    </div>
                `).join('');
            },

            showCaseDetails(caseId) {
                if (this.isAnimating) return;
                
                this.selectedCase = this.cases.find(c => c.id === caseId);
                if (!this.selectedCase) return;

                document.getElementById('modalCaseName').textContent = this.selectedCase.name;
                
                const itemsGrid = document.getElementById('itemsGrid');
                itemsGrid.innerHTML = this.selectedCase.items.map(item => `
                    <div class="item-card ${item.rarity}">
                        <div class="item-icon">${item.icon}</div>
                        <div class="item-name">${item.name}</div>
                        <div class="item-value">${item.value.toLocaleString()}</div>
                        <div class="item-chance">${item.chance}% chance</div>
                    </div>
                `).join('');

                document.getElementById('caseModal').classList.add('active');
                if (typeof GameSounds !== 'undefined') GameSounds.ui.click();
            },

            closeModal() {
                document.getElementById('caseModal').classList.remove('active');
                if (typeof GameSounds !== 'undefined') GameSounds.ui.click();
            },

            openCase(count) {
                if (this.isAnimating) return;
                
                const balance = getCurrentBalance();
                const totalCost = this.selectedCase.price * count;

                if (totalCost > balance) {
                    alert('Insufficient balance!');
                    if (typeof GameSounds !== 'undefined') GameSounds.ui.error();
                    return;
                }

                this.isAnimating = true;
                updateBalance(-totalCost);
                this.closeModal();

                const resultDisplay = document.getElementById('resultDisplay');
                resultDisplay.innerHTML = '';

                const allResults = [];
                for (let i = 0; i < count; i++) {
                    allResults.push(this.getRandomItem());
                }

                if (typeof GameSounds !== 'undefined') GameSounds.cases.spin();
                this.openAllCasesParallel(count, allResults, totalCost);
            },

            openAllCasesParallel(count, allResults, totalCost) {
                const overlay = document.getElementById('openingOverlay');
                overlay.classList.add('active');

                const spinnersContainer = document.createElement('div');
                spinnersContainer.style.cssText = `
                    display: flex;
                    flex-direction: column;
                    gap: 20px;
                    width: 90%;
                    max-width: 1200px;
                    margin-bottom: 40px;
                    max-height: 70vh;
                    overflow-y: auto;
                `;

                document.getElementById('openingOverlay').insertBefore(
                    spinnersContainer,
                    document.getElementById('resultDisplay')
                );

                for (let i = 0; i < count; i++) {
                    const spinnerDiv = this.createSpinnerElement(allResults[i], i);
                    spinnersContainer.appendChild(spinnerDiv);

                    setTimeout(() => {
                        this.animateSingleSpinner(spinnerDiv, allResults[i]);
                    }, i * 100);
                }

                setTimeout(() => {
                    spinnersContainer.remove();
                    this.showParallelResults(allResults, totalCost);
                    this.isAnimating = false;
                }, 4500 + (count * 100));
            },

            createSpinnerElement(wonItem, index) {
                const spinnerDiv = document.createElement('div');
                spinnerDiv.style.cssText = `
                    position: relative;
                    width: 100%;
                    height: 150px;
                    overflow: hidden;
                    background: rgba(0,0,0,0.3);
                    border-radius: 12px;
                `;

                spinnerDiv.innerHTML = `
                    <div style="position: absolute; left: 50%; top: 0; width: 2px; height: 100%; 
                            background: #fbbf24; box-shadow: 0 0 20px #fbbf24; 
                            transform: translateX(-1px); z-index: 10;"></div>
                    <div class="spinner-items-${index}" style="display: flex; position: absolute; left: 0; 
                                                                        transition: left 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);"></div>
                `;

                const items = [];
                for (let j = 0; j < 50; j++) {
                    const randomItem = this.selectedCase.items[Math.floor(Math.random() * this.selectedCase.items.length)];
                    items.push(randomItem);
                }

                const winPosition = 42;
                items[winPosition] = wonItem;

                const spinnerItems = spinnerDiv.querySelector(`.spinner-items-${index}`);
                spinnerItems.innerHTML = items.map(item => `
                    <div style="min-width: 120px; height: 130px; margin: 10px; background: #1f2937; 
                                border-radius: 10px; display: flex; flex-direction: column; align-items: center; 
                                justify-content: center; padding: 10px; border: 2px solid ${this.getRarityColor(item.rarity)};">
                        <div style="font-size: 48px; margin-bottom: 5px;">${item.icon}</div>
                        <div style="font-size: 10px; color: white; text-align: center; margin-bottom: 3px;">${item.name}</div>
                        <div style="font-size: 12px; font-weight: bold; color: #fbbf24;">${item.value.toLocaleString()}</div>
                    </div>
                `).join('');

                return spinnerDiv;
            },

            getRarityColor(rarity) {
                const colors = {
                    blue: '#3b82f6',
                    purple: '#8b5cf6',
                    pink: '#ec4899',
                    red: '#ef4444',
                    gold: '#fbbf24'
                };
                return colors[rarity] || '#3b82f6';
            },

            animateSingleSpinner(spinnerDiv, wonItem) {
                const itemWidth = 140;
                const winPosition = 42;
                const finalPosition = -(winPosition * itemWidth - spinnerDiv.offsetWidth / 2 + itemWidth / 2);

                const spinnerItems = spinnerDiv.querySelector('[class^="spinner-items"]');
                setTimeout(() => {
                    spinnerItems.style.left = finalPosition + 'px';
                }, 100);
            },

            async showParallelResults(allResults, totalCost) {
                // Calculate total value from all items
                const totalWon = allResults.reduce((sum, r) => sum + r.value, 0);
                const totalBet = totalCost;
                const profit = totalWon - totalBet;
                
                updateBalance(totalWon);

                if (typeof GameSounds !== 'undefined') {
                    if (profit > 0) {
                        const hasGold = allResults.some(r => r.rarity === 'gold');
                        const hasRed = allResults.some(r => r.rarity === 'red');
                        if (hasGold) GameSounds.cases.reveal('gold');
                        else if (hasRed) GameSounds.cases.reveal('red');
                        else GameSounds.cases.reveal('blue');
                    }   
                }
    
                const resultDisplay = document.getElementById('resultDisplay');
    
                const itemsByRarity = {};
                allResults.forEach(item => {
                    if (!itemsByRarity[item.rarity]) {
                        itemsByRarity[item.rarity] = [];
                    }
                    itemsByRarity[item.rarity].push(item);
                });
    
                const itemsHTML = Object.entries(itemsByRarity).map(([rarity, items]) => `
                    <div style="margin-bottom: 15px;">
                        <h3 style="font-size: 14px; color: ${this.getRarityColor(rarity)}; margin-bottom: 10px;">
                            ${rarity.toUpperCase()} (${items.length}x)
                        </h3>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;">
                            ${items.map(item => `
                                <div style="background: #1f2937; border: 2px solid ${this.getRarityColor(item.rarity)}; 
                                            border-radius: 8px; padding: 10px; text-align: center; min-width: 100px;">
                                    <div style="font-size: 32px;">${item.icon}</div>
                                    <div style="font-size: 11px; color: white; margin-top: 5px;">${item.name}</div>
                                    <div style="font-size: 13px; font-weight: bold; color: #fbbf24; margin-top: 3px;">
                                        $${item.value.toLocaleString()}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `).join('');
    
                resultDisplay.innerHTML = `
                    <h2 style="font-size: 28px; margin-bottom: 15px; color: white;">Cases Opened: ${allResults.length}</h2>
                    <div style="max-height: 400px; overflow-y: auto; margin-bottom: 20px; padding: 15px; 
                                background: rgba(0,0,0,0.3); border-radius: 12px;">
                        ${itemsHTML}
                    </div>
                    <div style="font-size: 22px; margin-bottom: 10px; color: white;">
                        Total Value: <span style="color: #fbbf24;">$${totalWon.toLocaleString()}</span>
                    </div>
                    <div class="result-profit ${profit >= 0 ? 'profit' : 'loss'}">
                        ${profit >= 0 ? 'Profit' : 'Loss'}: ${profit >= 0 ? '+' : ''}$${Math.abs(profit).toLocaleString()}
                    </div>
                    <button class="close-btn" onclick="CasesGame.closeOverlay()">Close</button>
                `;
    
                if (currentUser && allResults.length > 0) {
                    const caseCost = this.selectedCase.price;
        
                    // Submit stats for EACH case opened
                    for (let i = 0; i < allResults.length; i++) {
                        const caseValue = allResults[i].value;
                        const caseProfit = caseValue - caseCost;
                        const caseWon = caseProfit > 0;
            
                        // Each call increments the "played" counter by 1
                        await updateGameStats('cases', caseWon, caseCost, caseValue);
                    }
                }
    
                this.isAnimating = false;
            },

            getRandomItem() {
                const items = this.selectedCase.items;
                const totalWeight = items.reduce((sum, item) => sum + item.chance, 0);
                let random = Math.random() * totalWeight;

                for (let item of items) {
                    if (random < item.chance) {
                        return {...item};
                    }
                    random -= item.chance;
                }

                return {...items[0]};
            },

            closeOverlay() {
                document.getElementById('openingOverlay').classList.remove('active');
                if (typeof GameSounds !== 'undefined') GameSounds.ui.click();
                const spinnerItems = document.getElementById('spinnerItems');
                spinnerItems.style.transition = 'none';
                spinnerItems.style.left = '0px';
                setTimeout(() => {
                    spinnerItems.style.transition = 'left 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)';
                }, 100);
            }
        };

        if (typeof currentUser === 'undefined') {
            let currentUser = null;
        }

        CasesGame.init();
    </script>
</body>
</html>